{% extends 'base.html' %}
{% load static %}

{% block title %}Гарант Групп - Бани под ключ{% endblock %}

{% block content %}

<!-- Hero Section -->
<section class="hero" style="background: var(--gradient-warm); position: relative;">
    <div class="floating-shape" style="background: var(--accent-orange); opacity: 0.1;"></div>
    <div class="floating-shape" style="background: var(--wood-beige); opacity: 0.2;"></div>
    <div class="floating-shape" style="background: var(--accent-terracotta); opacity: 0.1;"></div>

    <div class="container">
        <div class="hero-content fade-in-up">
            <h1 class="hero-title" style="color: var(--gray-900);">Бани под ключ из Вологды</h1>
            <p class="hero-subtitle" style="color: var(--gray-700);">Изготовим и соберём баню любой сложности. От эконом-класса до элитных моделей с комнатой отдыха. Доставка по всей России.</p>
            <div class="hero-buttons" style="gap: 1rem;">
                <a href="{% url 'catalog' %}" class="btn btn-primary" style="background: linear-gradient(135deg, var(--accent-orange), var(--accent-terracotta)); color: white; border: none; padding: 1rem 2rem; border-radius: var(--radius-md); transition: transform 0.3s;">
                    Каталог <i class="fas fa-arrow-right" style="margin-left: 0.5rem;"></i>
                </a>
                <a href="{% url 'order' %}" class="btn btn-secondary" style="background: var(--wood-brown); color: white; border: none; padding: 1rem 2rem; border-radius: var(--radius-md); transition: transform 0.3s;">
                    Оставить заявку <i class="fas fa-phone" style="margin-left: 0.5rem;"></i>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- ========== ПОПУЛЯРНЫЕ МОДЕЛИ (из админки) ========== -->
{% if popular_products %}
<section class="section products-preview" style="background: var(--wood-lightest); padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Популярные модели</h2>

        <div class="products-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
            {% for product in popular_products %}
            <div class="product-card scale-in" style="background: white; border-radius: var(--radius-xl); overflow: hidden; box-shadow: var(--shadow-md); transition: transform 0.3s, box-shadow 0.3s;">
                <img src="{{ product.image.url|default:'/static/images/placeholder.jpg' }}"
                     class="product-card-img"
                     alt="{{ product.title }}"
                     style="width: 100%; height: 250px; object-fit: cover; transition: transform 0.3s;"
                     data-src="{{ product.image.url|default:'/static/images/placeholder.jpg' }}">

                <div class="card-content" style="padding: 1.5rem;">
                    <h3 class="card-title" style="color: var(--gray-900); margin-bottom: 1rem;">{{ product.title }}</h3>
                    <p class="card-text" style="color: var(--gray-600); margin-bottom: 1rem;">{{ product.description|truncatechars:120 }}</p>
                    <p class="card-price" style="color: var(--accent-orange); font-weight: bold; font-size: 1.5rem; margin-bottom: 1rem;">{{ product.formatted_price }}</p>
                    <a href="{% url 'product_detail' product.pk %}" class="btn btn-primary" style="width: 100%; background: var(--accent-orange); color: white; padding: 0.75rem; border-radius: var(--radius-sm); text-align: center; transition: background 0.3s;">
                        Подробнее
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>

        <div class="text-center mt-4">
            <a href="{% url 'catalog' %}" class="btn btn-primary" style="background: var(--accent-orange); color: white; padding: 1rem 2rem; border-radius: var(--radius-md); margin-top: 20px;">
                Смотреть весь каталог
            </a>
        </div>
    </div>
</section>
{% else %}
<section class="section products-preview" style="background: var(--wood-lightest); padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Популярные модели</h2>
        <div class="text-center">
            <p style="color: var(--gray-600);">Каталог пока пуст</p>
            <a href="{% url 'catalog' %}" class="btn btn-primary" style="background: var(--accent-orange); color: white; padding: 1rem 2rem;">Перейти в каталог</a>
        </div>
    </div>
</section>
{% endif %}


<!-- Видео секция -->
<section class="section video-section" style="background: var(--wood-cream); padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Наши работы на видео</h2>
        <div class="video-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; align-items: start;">
            <div class="video-container scale-in" style="max-width: 320px; background: white; border-radius: var(--radius-xl); overflow: hidden; box-shadow: var(--shadow-md); transition: transform 0.3s;">
                <iframe width="100%" height="350" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" title="Видео 1" frameborder="0" allowfullscreen loading="lazy" style="aspect-ratio: 16/9;"></iframe>
            </div>
            <div class="video-container scale-in" style="max-width: 320px; background: white; border-radius: var(--radius-xl); overflow: hidden; box-shadow: var(--shadow-md);">
                <iframe width="100%" height="350" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" title="Видео 2" frameborder="0" allowfullscreen loading="lazy" style="aspect-ratio: 16/9;"></iframe>
            </div>
            <div class="video-container scale-in" style="max-width: 320px; background: white; border-radius: var(--radius-xl); overflow: hidden; box-shadow: var(--shadow-md);">
                <iframe width="100%" height="350" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" title="Видео 3" frameborder="0" allowfullscreen loading="lazy" style="aspect-ratio: 16/9;"></iframe>
            </div>
            <div class="video-container scale-in" style="max-width: 320px; background: white; border-radius: var(--radius-xl); overflow: hidden; box-shadow: var(--shadow-md);">
                <iframe width="100%" height="350" src="https://www.youtube.com/embed/dQw4w9WgXcQ?rel=0" title="Видео 4" frameborder="0" allowfullscreen loading="lazy" style="aspect-ratio: 16/9;"></iframe>
            </div>
        </div>
    </div>
</section>

<!-- Отзывы (бесконечная карусель) -->
<section class="section-testimonials" style="background: var(--wood-light); padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Отзывы наших клиентов</h2>
        <div class="testimonial-carousel-wrapper" style="overflow: hidden; border-radius: var(--radius-xl);">
            <div class="testimonial-carousel" style="display: flex; animation: scroll 40s linear infinite; width: max-content; gap: 2rem;">
                <!-- 12 отзывов для seamless loop -->
                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Отличная баня, сделали быстро и качественно. Рекомендую!</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Иван П.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Очень довольны результатом. Качественная древесина, профессиональная сборка.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Мария К.</strong><br>
                        <span class="testimonial-location">Череповец</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Спасибо за отличную работу! Баня получилась лучше, чем на картинке.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Алексей В.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Доставили вовремя, установили за один день. Всё супер!</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Светлана Н.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Отличное соотношение цена-качество. Баня радует каждый день.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Дмитрий С.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Профессиональная команда, всё объяснили и помогли с выбором.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Ольга Л.</strong><br>
                        <span class="testimonial-location">Вологдская область</span>
                    </div>
                </div>

                <!-- Дублируем для бесконечного скролла -->
                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Отличная баня, сделали быстро и качественно. Рекомендую!</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Иван П.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Очень довольны результатом. Качественная древесина, профессиональная сборка.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Мария К.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Спасибо за отличную работу! Баня получилась лучше, чем на картинке.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Алексей В.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Доставили вовремя, установили за один день. Всё супер!</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Светлана Н.</strong><br>
                        <span class="testimonial-location">Череповец</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Отличное соотношение цена-качество. Баня радует каждый день.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Дмитрий С.</strong><br>
                        <span class="testimonial-location">Вологда</span>
                    </div>
                </div>

                <div class="testimonial-card" style="background: white; padding: 2rem; border-radius: var(--radius-lg); box-shadow: var(--shadow-sm); min-width: 300px; flex-shrink: 0;">
                    <span class="testimonial-quote" style="font-size: 4rem; color: var(--accent-orange);">"</span>
                    <p class="testimonial-text" style="color: var(--gray-700); margin: 1rem 0;">Профессиональная команда, всё объяснили и помогли с выбором.</p>
                    <div class="testimonial-author" style="color: var(--gray-600);">
                        <strong class="testimonial-name">Ольга Л.</strong><br>
                        <span class="testimonial-location">Вологдская область</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<!-- Преимущества (2 grid по 4 элемента) -->
<section class="section advantages-section" style="padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Почему выбирают нас</h2>

        <div class="advantages-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem; margin-bottom: 4rem;">
            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center; transition: transform 0.3s;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-leaf"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Качественная древесина</h3>
                <p style="color: var(--gray-600);">Используем здоровую древесину из северных лесов — бани «дышат».</p>
            </div>

            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-shield-alt"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Официальная гарантия</h3>
                <p style="color: var(--gray-600);">Работаем по договору и даём официальную гарантию на постройки и материалы.</p>
            </div>

            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-truck"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Быстрая установка</h3>
                <p style="color: var(--gray-600);">Привозим и устанавливаем за 1–2 дня — и можно начинать париться!</p>
            </div>

            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-users"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Полный контроль</h3>
                <p style="color: var(--gray-600);">Контролируем весь цикл — от заготовки леса до сборки на участке.</p>
            </div>
        </div>

        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Наши гарантии</h2>

        <div class="advantages-grid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 2rem;">
            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-clock"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Чистая работа</h3>
                <p style="color: var(--gray-600);">Собираем баню аккуратно и быстро, без строительного мусора.</p>
            </div>

            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-calculator"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Честная цена</h3>
                <p style="color: var(--gray-600);">Фиксируем стоимость, сроки и все детали. Без скрытых платежей.</p>
            </div>

            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-industry"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Своё производство</h3>
                <p style="color: var(--gray-600);">Изготавливаем домокомплект на складе из качественной древесины.</p>
            </div>

            <div class="advantage-card slide-in-left" style="background: white; padding: 2.5rem; border-radius: var(--radius-xl); box-shadow: var(--shadow-md); text-align: center;">
                <div class="advantage-icon" style="font-size: 3rem; color: var(--white); margin-bottom: 1rem;"><i class="fas fa-handshake"></i></div>
                <h3 style="color: var(--gray-900); margin-bottom: 1rem;">Бесплатная консультация</h3>
                <p style="color: var(--gray-600);">Оставляете заявку или звоните — поможем выбрать проект.</p>
            </div>
        </div>
    </div>
</section>

<section class="section section-credit">
    <div class="container">
        <div class="credit-card">
            <div class="credit-content">
                <h2 class="credit-title">Баня в кредит на выгодных условиях</h2>
                <p class="credit-subtitle">Оформите баню мечты уже сегодня, а платите потом. Быстрое одобрение онлайн от наших банков-партнеров.</p>
                <div class="credit-features">
                    <div class="feature-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg> Срок кредита: от 6 мес. до 5 лет</div>
                    <div class="feature-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg> Быстрая обработка заявок</div>
                    <div class="feature-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg> Возраст: от 18 лет</div>
                    <div class="feature-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg> Оформление онлайн по всей России</div>
                    <div class="feature-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg> Сумма: от 3 тыс. до 2 млн рублей</div>
                    <div class="feature-item"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6 9 17l-5-5"></path></svg> Норма одобрения 92%</div>
                </div>
                <button class="btn btn-primary" id="openCreditModal" style="background: linear-gradient(135deg, var(--accent-orange), var(--accent-terracotta)); color: white; padding: 1rem 2rem; border: none; border-radius: var(--radius-md); font-size: 1.1rem; cursor: pointer; transition: transform 0.3s;">Получить консультацию</button>
            </div>
            <div class="credit-logos">
                <p>Наши партнеры:</p>
                <div class="partners-text">
                    МТС Банк, ОТП Банк, Ренессанс Кредит, Совкомбанк, Альфа-Банк, ЛокоБанк, Кредит Европа Банк и другие.
                </div>
            </div>
        </div>
    </div>
</section>

<!-- МОДАЛЬНОЕ ОКНО ДЛЯ ЗАЯВКИ НА КРЕДИТ -->
<div id="creditModalOverlay" style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px);">
    <div style="background: white; margin: 5% auto; padding: 2.5rem; border-radius: 16px; box-shadow: 0 10px 40px rgba(0,0,0,0.2); max-width: 500px; position: relative;">
        <button id="closeCreditModal" type="button" style="position: absolute; right: 20px; top: 15px; background: none; border: none; font-size: 2rem; cursor: pointer; color: #666; transition: color 0.3s;">&times;</button>
        <h3 style="color: var(--gray-900); margin: 0 0 0.5rem 0;">Заявка на консультацию по кредиту</h3>
        <p style="color: var(--gray-600); margin: 0 0 2rem 0;">Оставьте ваши данные, и наш специалист свяжется с вами для обсуждения деталей.</p>

        <form id="creditForm" method="POST" action="{% url 'credit_request' %}" novalidate style="display: flex; flex-direction: column; gap: 1.5rem;">
            {% csrf_token %}
            <div id="credit-form-errors" style="display:none; color: #d32f2f; margin-bottom: 1rem;"></div>

            <div>
                <label style="display: block; color: var(--gray-800); font-weight: 600; margin-bottom: 0.5rem;">{{ credit_form.fio.label }}</label>
                {{ credit_form.fio }}
            </div>

            <div>
                <label style="display: block; color: var(--gray-800); font-weight: 600; margin-bottom: 0.5rem;">{{ credit_form.phone.label }}</label>
                {{ credit_form.phone }}
            </div>

            <div>
                <label style="display: block; color: var(--gray-800); font-weight: 600; margin-bottom: 0.5rem;">{{ credit_form.captcha.label }}</label>
                {{ credit_form.captcha }}
            </div>

            <button type="submit" class="btn btn-primary" style="background: linear-gradient(135deg, var(--accent-orange), var(--accent-terracotta)); color: white; padding: 1rem; border: none; border-radius: 8px; font-size: 1.1rem; cursor: pointer; transition: transform 0.3s; width: 100%;">
                Отправить заявку
            </button>
        </form>

        <div id="creditFormSuccess" style="display: none; text-align: center; padding: 2rem;">
            <div style="font-size: 4rem; color: #22c55e; margin-bottom: 1rem;">✓</div>
            <h3 style="color: var(--gray-900); margin: 0 0 0.5rem 0;">Заявка отправлена!</h3>
            <p style="color: var(--gray-600); margin: 0;">Мы свяжемся с вами в ближайшее время</p>
        </div>
    </div>
</div>


<!-- Этапы работы -->
<section class="section process-section" style="padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 3rem;">Как мы работаем</h2>

        <div class="stages-grid" style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 2rem; position: relative;">
            <div class="stage-item" style="text-align: center; padding: 2rem;">
                <div class="stage-number" style="background: var(--accent-orange); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 1rem;">1</div>
                <h3 style="color: var(--gray-900);">Консультация</h3>
                <p style="color: var(--gray-600);">Просматриваете каталог и подбираете подходящую баню.</p>
            </div>

            <div class="stage-item" style="text-align: center; padding: 2rem;">
                <div class="stage-number" style="background: var(--accent-orange); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 1rem;">2</div>
                <h3 style="color: var(--gray-900);">Расчёт</h3>
                <p style="color: var(--gray-600);">Оставляете заявку или звоните менеджеру для расчёта.</p>
            </div>

            <div class="stage-item" style="text-align: center; padding: 2rem;">
                <div class="stage-number" style="background: var(--accent-orange); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 1rem;">3</div>
                <h3 style="color: var(--gray-900);">Доставка</h3>
                <p style="color: var(--gray-600);">Доставляем конструкцию на ваш участок.</p>
            </div>

            <div class="stage-item" style="text-align: center; padding: 2rem;">
                <div class="stage-number" style="background: var(--accent-orange); color: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; margin: 0 auto 1rem;">4</div>
                <h3 style="color: var(--gray-900);">Сборка</h3>
                <p style="color: var(--gray-600);">Собираем баню аккуратно и быстро, с гарантией.</p>
            </div>
        </div>
    </div>
</section>

<!-- Карта -->
<section class="map-section section" style="background: var(--wood-lightest); padding: 4rem 0;">
    <div class="container">
        <h2 class="section-title" style="color: var(--gray-900); text-align: center; margin-bottom: 1rem;">Где мы находимся</h2>
        <p class="text-center mb-4" style="color: var(--gray-600); font-size: 1.1rem;">г. Вологда, ул. Гагарина, 81. Приезжайте на консультацию!</p>
        <div class="map-container" style="border-radius: var(--radius-xl); overflow: hidden; box-shadow: var(--shadow-md); max-width: 100%;">
            <iframe src="https://yandex.ru/map-widget/v1/?ll=39.828335%2C59.206333&z=16&l=map&pt=39.828335,59.206333,pm2vvm2.1&lang=ru" width="100%" height="400" frameborder="0" allowfullscreen loading="lazy"></iframe>
        </div>
    </div>
</section>

<!-- CTA секция -->
<section class="cta section text-center" style="background: var(--wood-beige); color: var(--gray-900); padding: 4rem 0;">
    <div class="container">
        <h2 style="margin-bottom: 1rem;">Готовы заказать баню?</h2>
        <p style="font-size: 1.2rem; margin-bottom: 2rem; color: var(--gray-700);">Закажите баню под ключ прямо сейчас и получите консультацию специалиста бесплатно.</p>
        <a href="{% url 'order' %}" class="btn btn-primary" style="background: linear-gradient(135deg, var(--accent-orange), var(--accent-terracotta)); color: white; padding: 1rem 2rem; border-radius: var(--radius-md); font-weight: bold; transition: transform 0.3s;">
            Оставить заявку
        </a>
    </div>
</section>

{% endblock %}

{% block extra_css %}
<style>
    @keyframes scroll {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
    }

    .testimonial-carousel:hover {
        animation-play-state: paused;
    }

    .product-card:hover,
    .advantage-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-lg);
    }

    .video-container:hover {
        transform: scale(1.02);
    }

    .btn-primary:hover {
        transform: scale(1.05);
    }

    @keyframes slideIn {
        from {
            transform: translateY(-50px);
            opacity: 0;
        }
        to {
            transform: translateY(0);
            opacity: 1;
        }
    }

    #closeCreditModal:hover {
        color: var(--accent-orange) !important;
    }

    .video-grid {
        max-width: 100%;
    }

    @media (max-width: 768px) {
        .products-grid,
        .advantages-grid,
        .stages-grid {
            grid-template-columns: 1fr;
        }

        .video-grid {
            grid-template-columns: 1fr;
            gap: 1rem;
        }
    }
</style>
{% endblock %}

{% block extra_js %}
<script>
    const openBtn = document.getElementById('openCreditModal');
    const modalOverlay = document.getElementById('creditModalOverlay');
    const closeBtn = document.getElementById('closeCreditModal');
    const form = document.getElementById('creditForm');
    const successDiv = document.getElementById('creditFormSuccess');

    openBtn.addEventListener('click', function(e) {
        e.preventDefault();
        modalOverlay.style.display = 'block';
        document.body.style.overflow = 'hidden';
    });

    closeBtn.addEventListener('click', function() {
        modalOverlay.style.display = 'none';
        document.body.style.overflow = 'auto';
    });

    modalOverlay.addEventListener('click', function(e) {
        if (e.target === modalOverlay) {
            modalOverlay.style.display = 'none';
            document.body.style.overflow = 'auto';
        }
    });

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        const formData = new FormData(form);

        fetch("{% url 'credit_request' %}", {
            method: 'POST',
            body: formData,
            headers: {'X-Requested-With': 'XMLHttpRequest'}
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                form.style.display = 'none';
                successDiv.style.display = 'block';

                setTimeout(() => {
                    modalOverlay.style.display = 'none';
                    document.body.style.overflow = 'auto';
                    form.style.display = 'flex';
                    successDiv.style.display = 'none';
                    form.reset();
                }, 3000);
            }
        })
        .catch(error => {
            console.error('Ошибка:', error);
            alert('Произошла ошибка при отправке формы.');
        });
    });
</script>
{% endblock %}